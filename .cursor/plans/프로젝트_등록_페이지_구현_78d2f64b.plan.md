---
name: 프로젝트 등록 페이지 구현
overview: 컨셉 이미지를 참고하여 프로젝트 등록 페이지를 구현합니다. 기본 정보, 거래처/연락처 선택, 멤버 선택, 날짜 범위 선택, 색상 선택, 일정 등록, 파일 업로드 기능을 포함합니다.
todos:
  - id: install-dependencies
    content: react-datepicker 및 타입 정의 설치
    status: completed
  - id: color-picker-component
    content: ColorPicker 컴포넌트 구현 (color input + 팔레트 드롭다운)
    status: completed
  - id: partner-api-client
    content: 거래처 API 클라이언트 함수 추가 (전체 목록, 연락처 조회)
    status: completed
  - id: user-api-client
    content: 사원 API 클라이언트 함수 추가 (전체 목록 조회)
    status: completed
  - id: project-create-api
    content: 프로젝트 생성 API 클라이언트 함수 추가
    status: completed
  - id: project-create-page-basic
    content: "프로젝트 등록 페이지 기본 구조 구현 (상단 섹션: 이름, 거래처, 날짜, 상태, 설명, 색상)"
    status: completed
    dependencies:
      - install-dependencies
      - color-picker-component
  - id: partner-contact-selection
    content: 거래처/연락처 선택 기능 구현 (드롭다운 + 멀티 체크박스)
    status: completed
    dependencies:
      - partner-api-client
      - project-create-page-basic
  - id: member-selection
    content: 사원(멤버) 선택 기능 구현 (멀티 체크박스)
    status: completed
    dependencies:
      - user-api-client
      - project-create-page-basic
  - id: schedule-registration
    content: 일정 등록 기능 구현 (로컬 상태 관리, 프로젝트 생성 후 API 호출)
    status: completed
    dependencies:
      - project-create-page-basic
  - id: file-upload
    content: 파일 업로드 기능 구현 (카테고리별 탭, 로컬 상태 관리, 프로젝트 생성 후 API 호출)
    status: completed
    dependencies:
      - project-create-page-basic
  - id: form-validation
    content: 폼 검증 및 제출 로직 구현
    status: completed
    dependencies:
      - project-create-api
      - partner-contact-selection
      - member-selection
  - id: project-list-button
    content: 프로젝트 목록 페이지에 등록 버튼 추가
    status: completed
  - id: route-setup
    content: 프로젝트 등록 페이지 라우트 추가 (/projects/new, ADMIN 권한)
    status: completed
    dependencies:
      - project-create-page-basic
  - id: todo-1767882250520-elwk5ae4l
    content: 개발 문서 정리(createProject.md, 상태관리, 데이터흐름, 화면 갱신, 레이아웃 구조)
    status: completed
---

# 프로젝트 등록 페이지 구현 계획

## 개요

컨셉 이미지를 참고하여 프로젝트 등록 페이지를 구현합니다. 프로젝트 기본 정보, 거래처/연락처 선택, 멤버 선택, 날짜 범위 선택, 색상 선택, 일정 등록, 파일 업로드 기능을 포함합니다.

## 구현 단계

### 1. 의존성 설치

- `react-datepicker` 라이브러리 설치 (날짜 범위 선택)
- `@types/react-datepicker` (TypeScript 타입 정의)

### 2. API 클라이언트 함수 추가

- 거래처 목록 조회 (전체 목록, 페이징 없이)
- 거래처 연락처 목록 조회 (`GET /partners/{partnerId}/contacts`)
- 사원 목록 조회 (전체 목록, 페이징 없이)
- 프로젝트 생성 API 호출 (`POST /projects`)
- 일정 생성 API 호출 (프로젝트 생성 후)
- 파일 업로드 API 호출 (프로젝트 생성 후)

### 3. 공통 컴포넌트 구현

- **ColorPicker**: 색상 선택 컴포넌트
  - `<input type="color">` 기본
  - 미리 정의된 팔레트 (10-12개 색상) 드롭다운
  - Material Design 또는 Tailwind 팔레트 참조

### 4. 프로젝트 등록 페이지 구조

컨셉 이미지 기반 레이아웃:

#### 상단 섹션: 기본 정보

- 프로젝트 이름 입력
- 거래처 선택 (드롭다운)
- 시작일/종료일 (react-datepicker 범위 선택)
- 상태 선택 (드롭다운: 진행 중, 보류, 완료)
- 설명 입력 (textarea)
- 색상 코드 선택 (ColorPicker 컴포넌트)

#### 중간 섹션: 팀 멤버 할당

- 거래처 연락처 선택
  - 거래처 선택 전: 비활성화
  - 거래처 선택 후: 해당 거래처의 연락처 목록 표시
  - 멀티 체크박스로 여러 명 선택
- 사원(멤버) 선택
  - 전체 사원 목록 표시
  - 멀티 체크박스로 여러 명 선택
  - 프로필 사진 또는 아바타 표시 (컨셉 이미지 참고)

#### 하단 섹션: 일정 및 파일

- 일정 등록
  - 일정 추가 버튼
  - 일정 목록 표시 (제목, 타입, 시작일, 종료일, 참여자)
  - 일정 수정/삭제 기능
- 파일 업로드
  - 카테고리별 탭 (전직서, 회로도, PLC 프로그램, BOM, HMI 등)
  - 파일 업로드 버튼
  - 업로드된 파일 목록 표시

### 5. 폼 상태 관리

- `useState`로 각 필드 상태 관리
- 폼 검증 (필수 필드 체크)
- 에러 메시지 표시

### 6. 프로젝트 목록 페이지 수정

- "등록" 버튼 추가
- 클릭 시 `/projects/new`로 이동

### 7. 라우트 추가

- `/projects/new` 라우트 추가 (ADMIN 권한 필요)

## 파일 구조

```
frontend/src/
├── components/
│   └── ColorPicker.tsx          # 색상 선택 컴포넌트
├── pages/
│   └── ProjectCreatePage.tsx    # 프로젝트 등록 페이지
├── api/
│   ├── project.ts               # 프로젝트 API (생성 함수 추가)
│   ├── partner.ts               # 거래처 API (목록, 연락처 조회)
│   └── user.ts                  # 사원 API (목록 조회)
```

## 주요 구현 포인트

### 날짜 범위 선택

- `react-datepicker`의 `DatePicker` 컴포넌트 사용
- `selectsRange` prop으로 범위 선택 활성화
- 시작일과 종료일을 하나의 컴포넌트로 선택

### 거래처 연락처 동적 로딩

- 거래처 선택 시 `useEffect`로 해당 거래처의 연락처 목록 자동 로딩
- 거래처 변경 시 연락처 선택 초기화

### 멀티 셀렉트 체크박스

- 체크박스 배열로 선택된 ID 목록 관리
- 선택/해제 시 상태 업데이트

### 일정 등록 (로컬 상태)

- 프로젝트 생성 전까지는 로컬 상태로 관리
- 프로젝트 생성 성공 후 각 일정을 순차적으로 생성

### 파일 업로드 (로컬 상태)

- 프로젝트 생성 전까지는 로컬 상태로 관리
- 프로젝트 생성 성공 후 각 파일을 순차적으로 업로드

## API 엔드포인트 확인 필요

1. **거래처 전체 목록 조회**

   - 현재: `GET /partners?page=0&size=100` (페이징 필요)
   - 또는: `GET /partners/all` (전체 목록 조회 엔드포인트 필요 여부 확인)

2. **사원 전체 목록 조회**

   - 현재: `GET /users?page=0&size=100` (페이징 필요)
   - 또는: `GET /users/all` (전체 목록 조회 엔드포인트 필요 여부 확인)

3. **일정 생성 API**

   - `POST /schedules` (프로젝트 ID 포함)

4. **파일 업로드 API**

   - `POST /files` (프로젝트 ID, 카테고리 포함)

## 구현 순서

1. 의존성 설치 및 ColorPicker 컴포넌트
2. API 클라이언트 함수 추가
3. 프로젝트 등록 페이지 기본 구조 (상단 섹션)
4. 거래처/연락처 선택 기능
5. 멤버 선택 기능
6. 일정 등록 기능
7. 파일 업로드 기능
8. 폼 제출 및 검증
9. 프로젝트 목록 페이지에 등록 버튼 추가
10. 라우트 추가